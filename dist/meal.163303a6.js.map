{"version":3,"sources":["../meal-plan/meal modules/classes.js","../meal-plan/meal modules/foodMacros.js","../meal-plan/meal modules/htmlTemplates.js","../meal-plan/meal modules/divCreation.js","../meal-plan/meal modules/modal.js","../meal-plan/meal.js"],"names":["Plan","name","macros","meals","placeNumber","div","date","Date","Meal","dishes","Dish","amount","unit","Macros","calories","protein","carbs","dishDiv","find","val","Math","round","food","console","log","foodNutrients","n","nutrientName","includes","value","findFood","getFoods","$","closest","dropdownMenu","empty","nameInput","query","toString","append","foodList","cleanArray","map","f","description","forEach","i","foodDiv","click","e","selectFood","input","foods","selectedFood","target","selectedFoodI","data","attr","html","getMacrosFromFoodItem","setMacrosDataOnDropdown","getMacrosFromDropdown","displayDishMacros","text","updateMacros","dishdiv","calcMacros","displayPlanMacros","getAllMacros","des","API_KEY","fetch","req","json","arr","Set","cal","getNamedMacro","prot","allMacros","span","match","reduce","sum","dishHtml","mealHtml","planDataHtml","mealDataHtml","dishDataHtml","foodItemHtml","createPlanDiv","plan","_","meal","createMealDiv","planDataElement","setPlanNameDate","addClass","setMealColor","planDiv","toLocaleDateString","each","mealDiv","dish","createDishDiv","length","mealDataElement","dishDataElement","saveChanges","index","createPlanFromModal","allPlans","updatePlans","closeModalAfterSave","curPlan","planName","allMeals","classes","createDishArr","planMacros","savePlanMacros","newPlan","push","removeClass","modal","cleanModal","Number","setTimeout","divArr","p","remove","before","divCreation","addMeal","templates","addDish","call","undefined","editPlan","planData","m","createPlan","alert","deleteDiv","classList","contains","deletePlan","setupClickHandlers","getCurPlanData","splice","findIndex","hasClass","updatePlansAfterDel","el","curPlanDiv","curPlanIndex","curPlanData","updateAddPlanButtonPicIn","updateAddPlanButtonPicOut","updateTrashButtonIn","updateTrashButtonOut","off","on","hover"],"mappings":"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","file":"meal.163303a6.js","sourceRoot":"..\\home-page","sourcesContent":["class Plan {\r\n  constructor(name, macros, meals, placeNumber = 0, div) {\r\n    this.name = name;\r\n    this.macros = macros;\r\n    this.date = new Date();\r\n    this.meals = meals; //array\r\n    this.placeNumber = placeNumber;\r\n    this.div = div;\r\n  }\r\n}\r\n\r\nclass Meal {\r\n  constructor(name, dishes, div) {\r\n    this.name = name;\r\n    this.dishes = dishes; //array\r\n    this.div = div;\r\n  }\r\n}\r\n\r\nclass Dish {\r\n  constructor(name, amount, unit, div, macros) {\r\n    this.name = name;\r\n    this.amount = amount;\r\n    this.unit = unit;\r\n    this.div = div;\r\n    this.macros = macros;\r\n  }\r\n}\r\n\r\nclass Macros {\r\n  constructor(calories, protein, carbs, dishDiv) {\r\n    this.calories = calories;\r\n    this.protein = protein;\r\n    this.carbs = carbs;\r\n    this.dishDiv = dishDiv;\r\n  }\r\n\r\n  calcMacros() {\r\n    const amount = this.dishDiv.find(\".dishAmount\").val();\r\n    const unit = this.dishDiv.find(\".dishUnit\").val();\r\n\r\n    if (!amount || !unit) return this;\r\n\r\n    if (unit == \"kg\" || unit == \"liters\") {\r\n      this.calories *= amount * 10;\r\n      this.protein *= amount * 10;\r\n      this.carbs *= amount * 10;\r\n    }\r\n\r\n    if (unit == \"grams\" || unit == \"ml\") {\r\n      this.calories *= amount / 100;\r\n      this.protein *= amount / 100;\r\n      this.carbs *= amount / 100;\r\n    }\r\n\r\n    this.calories = Math.round(this.calories);\r\n    this.protein = Math.round(this.protein);\r\n    this.carbs = Math.round(this.carbs);\r\n\r\n    return this;\r\n  }\r\n\r\n  getMacrosFromFoodItem(food) {\r\n    console.log(food);\r\n\r\n    (this.calories =\r\n      food.foodNutrients.find((n) => n.nutrientName.includes(\"Energy\")).value ??\r\n      0),\r\n      (this.protein =\r\n        food.foodNutrients.find((n) => n.nutrientName.includes(\"Protein\"))\r\n          .value ?? 0),\r\n      (this.carbs =\r\n        food.foodNutrients.find((n) => n.nutrientName.includes(\"Carbohydrate\"))\r\n          ?.value ?? 0);\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport { Plan, Meal, Dish, Macros };\r\n","import { Macros } from \"./classes.js\";\r\n\r\nexport async function findFood() {\r\n  const dishDiv = $(this).closest(\".dishDiv\");\r\n  const dropdownMenu = dishDiv.find(\".food-dropdown-menu\");\r\n\r\n  dropdownMenu.empty();\r\n\r\n  const nameInput = dishDiv.find(\".dishName\");\r\n  const query = nameInput.val().toString();\r\n\r\n  if (!query) dropdownMenu.append(`<li><a>Searh food name...</a></li>`);\r\n  else dropdownMenu.append(`<li><a>looading...</a></li>`);\r\n\r\n  const foodList = await getFoods(query);\r\n  if (!foodList) return;\r\n\r\n  dropdownMenu.empty();\r\n\r\n  const foodsDes = cleanArray(foodList.map((f) => f.description));\r\n\r\n  foodsDes.forEach((f, i) => {\r\n    const foodDiv = $(\r\n      `<li><a class=\"dropdown-item\" href=\"#\" data-index=${i}>${f}</a></li>`\r\n    );\r\n    dropdownMenu.append(foodDiv);\r\n    foodDiv.click((e) => {\r\n      selectFood(e, nameInput, foodList);\r\n    });\r\n  });\r\n}\r\n\r\nfunction selectFood(e, input, foods) {\r\n  const selectedFood = $(e.target);\r\n  const selectedFoodI = selectedFood.data(\"index\");\r\n\r\n  input.attr(\"data-index\", selectedFoodI);\r\n  input.val(selectedFood.html());\r\n\r\n  const macros = new Macros(0, 0, 0, input.closest(\".dishDiv\"));\r\n  macros.getMacrosFromFoodItem(foods[selectedFoodI]);\r\n  setMacrosDataOnDropdown(input.closest(\".dishDiv\"), macros);\r\n  0;\r\n}\r\n\r\nfunction setMacrosDataOnDropdown(dishDiv, macros) {\r\n  dishDiv.find(\".dropdown-cal\").attr(\"data-value\", macros.calories);\r\n  dishDiv.find(\".dropdown-prot\").attr(\"data-value\", macros.protein);\r\n  dishDiv.find(\".dropdown-carbs\").attr(\"data-value\", macros.carbs);\r\n}\r\n\r\nfunction getMacrosFromDropdown(dishDiv) {\r\n  return new Macros(\r\n    dishDiv.find(\".dropdown-cal\").attr(\"data-value\"),\r\n    dishDiv.find(\".dropdown-prot\").attr(\"data-value\"),\r\n    dishDiv.find(\".dropdown-carbs\").attr(\"data-value\"),\r\n    dishDiv\r\n  );\r\n}\r\n\r\nfunction displayDishMacros(dishDiv, macros) {\r\n  dishDiv.find(\".dropdown-cal\").text(`Calories: ${macros.calories}cal`);\r\n  dishDiv.find(\".dropdown-prot\").text(`protein: ${macros.protein}g`);\r\n  dishDiv.find(\".dropdown-carbs\").text(`Carbs: ${macros.carbs}g`);\r\n}\r\n\r\nexport function updateMacros(e) {\r\n  const dishdiv = $(e.target.closest(\".dishDiv\"));\r\n  const basicMacros = getMacrosFromDropdown(dishdiv);\r\n  const newMacros = basicMacros.calcMacros();\r\n\r\n  displayDishMacros(dishdiv, newMacros);\r\n  displayPlanMacros(getAllMacros());\r\n}\r\n\r\nasync function getFoods(des) {\r\n  const API_KEY = \"b1oBKkfsRfpbbbIZFfVrN7m5q9jhK6mdvyL4010F\";\r\n\r\n  if (!des) return;\r\n  const req = await fetch(\r\n    `https://api.nal.usda.gov/fdc/v1/foods/search?api_key=${API_KEY}&query=${des}`\r\n  );\r\n  const data = await req.json();\r\n  return data.foods;\r\n}\r\nfunction cleanArray(arr) {\r\n  return [...new Set(arr)];\r\n}\r\n\r\nfunction displayPlanMacros(macros) {\r\n  console.log(macros, $(\".plan-dropdown-cal\"));\r\n  $(\".plan-dropdown-cal\").text(`Calories: ${macros.calories}cal`);\r\n  $(\".plan-dropdown-prot\").text(`protein: ${macros.protein}g`);\r\n  $(\".plan-dropdown-carbs\").text(`Carbs: ${macros.carbs}g`);\r\n}\r\n\r\nfunction getAllMacros() {\r\n  const cal = getNamedMacro(\"cal\");\r\n  const prot = getNamedMacro(\"prot\");\r\n  const carbs = getNamedMacro(\"carbs\");\r\n  const allMacros = new Macros(cal, prot, carbs);\r\n  console.log(allMacros);\r\n  return allMacros;\r\n}\r\n\r\nfunction getNamedMacro(name) {\r\n  return [...$(`.dropdown-${name}`)]\r\n    .map((span) => {\r\n      const str = $(span).html();\r\n      return +str.match(/\\d+/);\r\n    })\r\n    .reduce((sum, val) => sum + val);\r\n}\r\n","//~~~~~~~~Dish Div\r\nexport let dishHtml = `\r\n    \r\n    <div class=\"container-fluid dishDiv input-group mb-3\" id=\"dish\">\r\n        <label for=\".dishList\" class=\"form-label\"></label>\r\n        <button\r\n          class=\"iconBtn delBtn delDish\"\r\n          data-bs-toggle=\"tooltip\"\r\n          data-bs-html=\"true\"\r\n          title = \"delete\"\r\n        >\r\n          <i class=\"bi bi-trash trashBtn\"></i>\r\n        </button>\r\n\r\n        <input class=\"form-control dishName dishList\" id=\"id=\"dropdownMenuLink\"\" placeholder=\"Search dish...\" data-fdcid=\"\" data-bs-toggle=\"dropdown\" autocomplete=\"off\">\r\n        <button class=\"searchFood btn-dark me-2\" id=\"dropdownMenuLink\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n          <i class=\"bi bi-search\"></i>\r\n        </button>\r\n        <ul class=\"dropdown-menu food-dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\r\n        </ul>\r\n            \r\n        <input type=\"number\" class=\"dishAmount form-control\" placeholder=\"0.00\" autocomplete=\"off\">\r\n        <input class=\"form-control dishUnit\" list=\"unitDataList\" id=\"unitList\" placeholder=\"unit\" autocomplete=\"off\">\r\n        <datalist id=\"unitDataList\">\r\n            <option value=\"kg\">\r\n            <option value=\"grams\">\r\n            <option value=\"liters\">\r\n            <option value=\"ml\">\r\n        </datalist>\r\n        <span class=\"input-group-text\">\r\n          <div class=\"dropdown\">\r\n            <button\r\n              class=\"btn dropdown-toggle macrosMenu\"\r\n              type=\"button\"\r\n              id=\"dishMacroMenu\"\r\n              data-bs-toggle=\"dropdown\"\r\n              aria-expanded=\"false\"\r\n            >\r\n            macros\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"modalMacroMenu\">\r\n              <li><span class=\"dropdown-item-text dropdown-cal\" data-value=\"\">Calories:</span></li>\r\n              <li><span class=\"dropdown-item-text dropdown-prot\" data-value=\"\">Proteins:</span></li>\r\n              <li><span class=\"dropdown-item-text dropdown-carbs\" data-value=\"\">Carbs:</span></li>\r\n              \r\n            </ul>\r\n          </div>\r\n        </span>\r\n    </div>\r\n`;\r\n//~~~~~~~~Dish Div\r\n\r\n//~~~~~~~~Meal Div\r\nexport let mealHtml = `\r\n    <div class=\"container-fluid mealDiv\">\r\n      <table class=\"table table-striped\" style=\"margin-bottom:0\">\r\n        <thead>\r\n          <th scope=\"col\">\r\n            <input type=\"text\" class=\"form-control mealName\" placeholder=\"meal name\" style=\"border: none\">  \r\n          </th>\r\n          <th scope=\"col\">\r\n            <button\r\n            class=\"iconBtn delBtn delMeal\"\r\n              data-bs-toggle=\"tooltip\"\r\n              data-bs-html=\"true\"\r\n              title = \"delete\"\r\n            >\r\n              <i class=\"bi bi-trash trashBtn\"></i>\r\n            </button>\r\n          </th>\r\n        </thead>\r\n      </table>\r\n\r\n\r\n      <div class=\"dishContainer\" style=\"text-align:center;\">\r\n        <button \r\n              class=\"iconBtn add-dish\"\r\n              data-bs-toggle=\"tooltip\"\r\n              data-bs-html=\"true\"\r\n              title = \"add dish\">\r\n          <i class=\"bi bi-plus-circle addDishCircle addCircle\"></i></button>\r\n      </div>\r\n    </div>\r\n    `;\r\n//~~~~~~~~Meal Div\r\n\r\n//~~~~~~~~~~~~~~Daily description scrolldown\r\nexport let planDataHtml = `\r\n    <div class=\"container-fluid planData\" style=\"margin: 15px 0 15px 0;\" planNum=\"\">\r\n      <div class=\"row planDataHeader bg-dark\">\r\n        <div class=\"col-4 planDataName desTitle\">\r\n          <p class=\"centerW dayName\">name</p>\r\n        </div>\r\n        <div class=\"col-3 planDataMacros desTitle\">\r\n          <div class=\"dropdown\">\r\n            <button\r\n              class=\"btn btn-dark dropdown-toggle\"\r\n              type=\"button\"\r\n              id=\"modalMacroMenu\"\r\n              data-bs-toggle=\"dropdown\"\r\n              aria-expanded=\"false\"\r\n            >\r\n              macros\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"DataMacroMenu\">\r\n              <li>\r\n                <span class=\"dropdown-item-text plan-dropdown-cal\"\r\n                  >Calories:</span\r\n                >\r\n              </li>\r\n              <li>\r\n                <span class=\"dropdown-item-text plan-dropdown-prot\"\r\n                  >Proteins:</span\r\n                >\r\n              </li>\r\n              <li>\r\n                <span class=\"dropdown-item-text plan-dropdown-carbs\"\r\n                  >Carbs:</span\r\n                >\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3 planDataDate desTitle\">\r\n          <p class=\"centerW planDataDate\">date</p>\r\n        </div>\r\n        <div class=\"col-2 desTitle\">\r\n          <div class=\"row\">\r\n            <div class=\"col-4\">\r\n            <button\r\n              class=\"whiteIconBtn collapseB\"\r\n              type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              data-bs-target= \"\"\r\n              data-bs-toggle=\"tooltip\"\r\n              data-bs-html=\"true\"\r\n              title = \"expand/collapse\"\r\n              aria-expanded=\"false\"\r\n              style=\"margin-top: 6px;\"\r\n            >\r\n              <i class=\"bi bi-arrow-bar-down\"></i>  \r\n            </button>\r\n            </div>\r\n            <div class=\"col-4\" style=\"padding:0;\">\r\n            <button\r\n              class=\"whiteIconBtn planEditBtn\" \r\n              style=\"margin-top: 6px;\"\r\n              data-bs-toggle=\"tooltip\"\r\n              data-bs-html=\"true\"\r\n              title = \"edit\"\r\n            >\r\n            <i class=\"bi bi-pencil-square\"></i>\r\n            </button>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <button\r\n                class=\"iconBtn delBtn delPlan whiteIconBtn\"  \r\n                style=\"float: right; margin-top: 6px;\"\r\n                data-bs-toggle=\"tooltip\"\r\n                data-bs-html=\"true\"\r\n                title = \"delete\"\r\n                >\r\n                  <i class=\"bi bi-trash \"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"collapse window row first\">\r\n        <div class=\"container-fluid planDataBody\" style=\"padding: 0\"></div>\r\n      </div>\r\n    </div>`;\r\n\r\nexport let mealDataHtml = `\r\n            <div class=\"mealData\">\r\n\r\n              <h2 class=\"text-center mealDataName\">meal name</h2>\r\n              <table class=\"table table-striped\" style=\"margin-bottom:0\">\r\n              <thead>\r\n              <th scope=\"col\">Dish</th>\r\n              <th scope=\"col\">Amount</th>\r\n              </thead>\r\n              <tbody class=\"mealTable\">\r\n                \r\n                </tbody>\r\n              </table>\r\n            </div>\r\n`;\r\n\r\nexport let dishDataHtml = `  \r\n                <tr class=\"dishData\">\r\n                  <td>\r\n                    <div class=\"dishDataName p-3 dishDes\">\r\n                      dish name\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"dishDataAmountUnit p-3 dishDes\">\r\n                      amount and unit\r\n                    </div>\r\n                  </td>\r\n                </tr>             \r\n`;\r\n\r\nexport const foodItemHtml = `\r\n<li><a class=\"dropdown-item\" href=\"#\">Action</a></li>`;\r\n","import {\r\n  mealHtml,\r\n  mealDataHtml,\r\n  dishHtml,\r\n  dishDataHtml,\r\n  planDataHtml,\r\n} from \"./htmlTemplates.js\";\r\nimport { allPlans } from \"../meal.js\";\r\n\r\nconst createPlanDiv = function (plan) {\r\n  const name = plan.name;\r\n  const meals = plan.meals.map((_, meal) => createMealDiv(meal)); //array\r\n  const planDataElement = $(planDataHtml);\r\n\r\n  planDataElement.attr(\"planNum\", plan.placeNumber);\r\n\r\n  planDataElement\r\n    .find(\".collapseB\")\r\n    .attr(\"data-bs-target\", `.collapse${plan.placeNumber}`);\r\n\r\n  setPlanNameDate(planDataElement, plan, name);\r\n\r\n  planDataElement.find(\".collapse\").addClass(`collapse${plan.placeNumber}`);\r\n  // appending each mealDiv in the meals array to plandatabody and setting classes for colors\r\n  setMealColor(planDataElement, meals);\r\n  displayPlanMacros(planDataElement, plan.macros);\r\n\r\n  return planDataElement;\r\n};\r\n\r\nfunction setPlanNameDate(planDiv, plan, name) {\r\n  if (name === \"\") {\r\n    planDiv.find(\".planDataName\").find(\"p\").html(\"Nameless plan...\");\r\n  } else {\r\n    planDiv.find(\".planDataName\").find(\"p\").html(name);\r\n  }\r\n\r\n  planDiv\r\n    .find(\".planDataDate\")\r\n    .find(\"p\")\r\n    .text(plan.date.toLocaleDateString(\"en-GB\"));\r\n}\r\n\r\nfunction setMealColor(planDiv, meals) {\r\n  meals.each((_, mealDiv) => {\r\n    planDiv.find(\".planDataBody\").append(mealDiv);\r\n  });\r\n}\r\n\r\nfunction displayPlanMacros(planDiv, macros) {\r\n  // if (\r\n  //   Number.isInteger(macros.calories) &&\r\n  //   Number.isInteger(macros.protein) &&\r\n  //   Number.isInteger(macros.carbs)\r\n  // ) {\r\n  planDiv.find(\".plan-dropdown-cal\").text(`Calories: ${macros.calories}cal`);\r\n  planDiv.find(\".plan-dropdown-prot\").text(`protein: ${macros.protein}g`);\r\n  planDiv.find(\".plan-dropdown-carbs\").text(`Carbs: ${macros.carbs}g`);\r\n  // }\r\n}\r\n\r\nconst createMealDiv = function (meal) {\r\n  const name = meal.name;\r\n  const dishes = meal.dishes.map((_, dish) => $(createDishDiv(dish)));\r\n\r\n  if (dishes.length === 0 || meal.dishes.length === 0) return;\r\n\r\n  const mealDataElement = $(mealDataHtml); //class mealData\r\n  mealDataElement.find(\".mealDataName\").html(name);\r\n  dishes.each((_, dishDiv) => {\r\n    mealDataElement.find(\".mealTable\").append(dishDiv);\r\n  });\r\n  return mealDataElement;\r\n};\r\n\r\nconst createDishDiv = function (dish) {\r\n  const name = dish.name;\r\n  const amount = dish.amount;\r\n  const unit = dish.unit;\r\n\r\n  if (!name && !amount && !unit) return;\r\n\r\n  const dishDataElement = $(dishDataHtml);\r\n  dishDataElement.find(\".dishDataName\").html(name);\r\n  dishDataElement.find(\".dishDataAmountUnit\").html(`${amount} ${unit}`);\r\n\r\n  return dishDataElement;\r\n};\r\n\r\nexport { createPlanDiv };\r\n","import * as templates from \"./htmlTemplates.js\";\r\nimport { setupClickHandlers, allPlans, getCurPlanData } from \"../meal.js\";\r\nimport * as classes from \"./classes.js\";\r\nimport * as divCreation from \"./divCreation.js\";\r\n\r\nexport function saveChanges() {\r\n  const index = $(\".modal\").attr(`planNum`);\r\n  const curPlan = allPlans[index];\r\n\r\n  createPlanFromModal(curPlan, index);\r\n  updatePlans();\r\n  closeModalAfterSave(index);\r\n  console.log(allPlans);\r\n}\r\n\r\nfunction createPlanFromModal(curPlan, index) {\r\n  let planName = $(\".modal-title\").val();\r\n  const allMealsDivs = $(\".mealDiv\"); //this is an array\r\n  const allMeals = allMealsDivs.map((_, mealDiv) => {\r\n    return new classes.Meal(\r\n      $(mealDiv).find(\".mealName\").val(),\r\n      createDishArr($(mealDiv).find(\".dishDiv\")),\r\n      mealDiv\r\n    );\r\n  });\r\n\r\n  const planMacros = savePlanMacros();\r\n\r\n  const newPlan = new classes.Plan(\r\n    planName,\r\n    planMacros,\r\n    allMeals,\r\n    $(\".modal\").attr(\"planNum\"),\r\n    $(\".mealDiv\")\r\n  );\r\n\r\n  if (!curPlan) allPlans.push(newPlan);\r\n  else allPlans[index] = newPlan;\r\n}\r\n\r\nfunction closeModalAfterSave(index) {\r\n  $(\".modal\").removeClass(`planNumber-${index}`);\r\n  $(\".modal-title\").val(\"\");\r\n  $(\"#mealModal\").modal(\"hide\");\r\n  cleanModal(); // cleaning the modal\r\n  if (allPlans.length === 1) {\r\n    $(\".header\").html(\"Name Workout\");\r\n    $(\".openBtnDiv\").addClass(\"openBtnDivAfter\");\r\n  }\r\n}\r\n\r\nfunction savePlanMacros() {\r\n  return {\r\n    calories: Number($(\".plan-dropdown-cal\").html().match(/\\d+/)),\r\n    protein: Number($(\".plan-dropdown-prot\").html().match(/\\d+/)),\r\n    carbs: Number($(\".plan-dropdown-carbs\").html().match(/\\d+/)),\r\n  };\r\n}\r\n\r\nexport function cleanModal() {\r\n  setTimeout(() => {\r\n    $(\".mealsContainer\").html(\"\");\r\n  }, 130);\r\n}\r\n\r\nfunction createDishArr(divArr) {\r\n  return divArr.map(\r\n    (_, div) =>\r\n      new classes.Dish(\r\n        $(div).find(\".dishName\").val(),\r\n        $(div).find(\".dishAmount\").val(),\r\n        $(div).find(\".dishUnit\").val(),\r\n        div,\r\n        divArr.find()\r\n      )\r\n  );\r\n}\r\n\r\nfunction updatePlans() {\r\n  const plans = $(\".planData\");\r\n  plans.each((_, p) => p.remove());\r\n\r\n  allPlans.forEach((plan) => {\r\n    $(\".allPlansContainer\")\r\n      .find(\".openBtnContainer\")\r\n      .before(divCreation.createPlanDiv(plan));\r\n    // $(\".openBtnDiv\").before(divCreation.createPlanDiv(plan));\r\n  });\r\n  setupClickHandlers();\r\n}\r\n\r\nexport function addMeal(name, dishes = []) {\r\n  const meal = $(templates.mealHtml);\r\n\r\n  if (dishes.length > 0) dishes.forEach((dish) => addDish.call(meal, dish));\r\n  else addDish.call(meal);\r\n\r\n  $(\".mealsContainer\").append(meal);\r\n  if (name === undefined) {\r\n    name = `meal ${$(\".mealDiv\").length}`;\r\n  }\r\n  meal.find(\".mealName\").val(name);\r\n\r\n  setupClickHandlers();\r\n}\r\n\r\nexport function addDish(dish = new classes.Dish()) {\r\n  const dishDiv = $(templates.dishHtml);\r\n\r\n  dishDiv.find(\".dishName\").val(dish.name);\r\n  dishDiv.find(\".dishAmount\").val(dish.amount);\r\n  dishDiv.find(\".dishUnit\").val(dish.unit);\r\n\r\n  $(this).closest(\".mealDiv\").find(\".add-dish\").before(dishDiv); // adding the dishDiv html\r\n  setupClickHandlers();\r\n}\r\n\r\nexport function editPlan() {\r\n  const planData = getCurPlanData(this);\r\n  $(\"#mealModal\").modal(\"toggle\");\r\n  $(\".modal\").attr(`planNum`, planData.placeNumber);\r\n  $(\".mealDiv\").each((_, m) => m.remove());\r\n  $(\".modal-title\").val(planData.name);\r\n  $(\"#mealModal\").find(\".mealsContainer\").append(planData.div);\r\n  setupClickHandlers();\r\n  // Array(...planData.meals).forEach((meal) =>\r\n  //   addMeal(meal.name, Array(...meal.dishes))\r\n  // );\r\n}\r\n","import { findFood, updateMacros } from \"./meal modules/foodMacros.js\";\r\nimport * as modal from \"./meal modules/modal.js\";\r\n\r\nlet allPlans = [];\r\n\r\nsetupClickHandlers();\r\n//~~~~~~~~~~~~~~Daily description scrolldown\r\n\r\nfunction createPlan() {\r\n  const planName = $(\".dailyName\").val();\r\n  if (allPlans.find((p) => p.name === planName)) {\r\n    alert(`can't use the same plan name twice`);\r\n  } else {\r\n    $(\".modal\").modal(\"show\");\r\n    $(\".modal\").attr(`planNum`, allPlans.length);\r\n    $(\".modal-title\").text($(\".dailyName\").val());\r\n    if ($(\".mealDiv\").length === 0) {\r\n      modal.addMeal();\r\n    }\r\n  }\r\n}\r\n\r\nfunction deleteDiv() {\r\n  if (this.classList.contains(\"delMeal\")) this.closest(\".mealDiv\").remove();\r\n  if (this.classList.contains(\"delDish\")) this.closest(\".dishDiv\").remove();\r\n  if (this.classList.contains(\"delPlan\")) {\r\n    deletePlan(this);\r\n  }\r\n  setupClickHandlers();\r\n}\r\n\r\nfunction deletePlan(planDiv) {\r\n  const plan = getCurPlanData(planDiv);\r\n  planDiv.closest(\".planData\").remove();\r\n  allPlans.splice(\r\n    allPlans.findIndex((p) => p === plan),\r\n    1\r\n  );\r\n  if (allPlans.length === 0 && $(\".openBtnDiv\").hasClass(\"openBtnDivAfter\")) {\r\n    $(\".openBtnDiv\").removeClass(\"openBtnDivAfter\");\r\n    $(\".header\").html(\"Click + to add plans\");\r\n  }\r\n  updatePlansAfterDel();\r\n}\r\n\r\nfunction updatePlansAfterDel() {\r\n  $(\".planData\").each((i, p) => {\r\n    $(p).attr(\"planNum\", i);\r\n    getCurPlanData(p).placeNumber = i;\r\n  });\r\n}\r\n\r\nfunction getCurPlanData(el) {\r\n  const curPlanDiv = $(el.closest(\".planData\"));\r\n  const curPlanIndex = curPlanDiv.attr(\"planNum\");\r\n  const curPlanData = allPlans[curPlanIndex];\r\n  console.log(curPlanData);\r\n  return curPlanData;\r\n}\r\n\r\nfunction updateAddPlanButtonPicIn() {\r\n  $(this).removeClass(\"bi-plus-circle\");\r\n  $(this).addClass(\"bi-plus-circle-fill\");\r\n}\r\n\r\nfunction updateAddPlanButtonPicOut() {\r\n  $(this).removeClass(\"bi-plus-circle-fill\");\r\n  $(this).addClass(\"bi-plus-circle \");\r\n}\r\n\r\nfunction updateTrashButtonIn() {\r\n  $(this).removeClass(\"bi-trash\");\r\n  $(this).addClass(\"bi-trash-fill \");\r\n}\r\nfunction updateTrashButtonOut() {\r\n  $(this).removeClass(\"bi-trash-fill\");\r\n  $(this).addClass(\"bi-trash \");\r\n}\r\n\r\nfunction setupClickHandlers() {\r\n  //daily plan modal button\r\n  $(\"#openModal\").off(\"click\").click(createPlan);\r\n  //add meal to daily plan button\r\n  $(\".addMeal\")\r\n    .off(\"click\")\r\n    .click(() => modal.addMeal());\r\n\r\n  //save daily changes button\r\n  $(\".savePlanBtn\").off(\"click\").click(modal.saveChanges);\r\n  $(\".closeModalBtn\")\r\n    .off(\"click\")\r\n    .click(() => modal.cleanModal());\r\n\r\n  $(\".planEditBtn\").off(\"click\").click(modal.editPlan);\r\n\r\n  $(\".add-dish\") // add dish button\r\n    .off(\"click\")\r\n    .click(modal.addDish);\r\n\r\n  $(\".delBtn\").off(\"click\").click(deleteDiv);\r\n\r\n  $(\".searchFood\").off(\"click\").click(findFood);\r\n\r\n  $(\".dishName\").on(\"input\", findFood);\r\n\r\n  $(\".dishAmount\").on(\"input\", updateMacros);\r\n\r\n  $(\".dishUnit\").on(\"input\", updateMacros);\r\n\r\n  $(\".addCircle\").hover(updateAddPlanButtonPicIn, updateAddPlanButtonPicOut);\r\n\r\n  $(\".trashBtn\").hover(updateTrashButtonIn, updateTrashButtonOut);\r\n  // $(\".macros-dropdown-menu\").off(\"click\").click(renderMacros);\r\n}\r\n\r\nexport { allPlans, setupClickHandlers, getCurPlanData };\r\n"]}